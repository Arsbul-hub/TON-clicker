#:import webbrowser webbrowser
#:import C kivy.utils.get_color_from_hex
#:import swichToScreen settings.swichToScreen
#:import FadeTransition kivy.uix.screenmanager.FadeTransition
#:import NoTransition kivy.uix.screenmanager.NoTransition
<ButImage>:
<ShopItem>
    padding: 16
    adaptive_width: True
    size_hint: 1, None

    height: "150sp"
    #background: "background_card.jpg"


    #MDRelativeLayout:
    orientation: "vertical"

    MDRelativeLayout:

        pos_hint: {"center_y": .8}
        #md_bg_color: 1,0,0,1
        #disabled: True
        Image:
            source: root.icon
            #pos_hint: {"center_y": .8}
        CustomLabel:
            id: lvl_text
            text: "Lvl " + str(root.lvl)
            color: root.lvl_text_color
            pos_hint: {"center_y": .95}
            #halign: "left"

            font_name: "images/main_font.ttf"
            font_size: "18sp"
            #color: .2, .2, .2, .8
            markup: True
        FloatLayout:
            id: check
            Widget:
                disabled: True




    CustomLabel:
        id: text
        text: root.text
        pos_hint: {"center_x": .5, "center_y": .4}
        halign: "center"
        font_name: "images/main_font.ttf"
        font_size: "20sp"
        #color: .2, .2, .2, .8
        markup: True
    CustomLabel:
        id: secondary_text
        text: root.secondary_text
        pos_hint: {"center_y": .07}
        font_name: "images/main_font.ttf"
        font_size: "20sp"
        color: .2, .2, .2, .8
        halign: "center"
        markup: True


<CustomWidthTabb@TabbedPanelItem>
    width: self.texture_size[0]
    padding: 10, 0
    size_hint_x: None
#<ImageLeftWidget>
<RoundedRectangleButton>:
    #text_color: 0,0,0,1
    background_color: 0,0,0,0  # the last zero is the critical on, make invisible
    canvas.before:
        Color:
            rgba: self.color
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [6]

<ImageLabel@BoxLayout>:

    Image:
        size_hint_x: .1

        source: "ton_num.png"
    CustomLabel:

        text: "reee"
<ClickableTextFieldRound>:
    size_hint_y: None
    height: text_field.height

    MDTextFieldRound:
        id: text_field
        hint_text: root.hint_text
        text: root.text
        password: True
        font_size: "20sp"
        font_name: "images/main_font.ttf"
        color_active: [1,1,1,1]
        #icon_left: "key-variant"
        #padding:
        #    self._lbl_icon_left.texture_size[1] + dp(10) if self.icon_left else dp(15),                 (self.height / 2) - (self.line_height / 2),                 self._lbl_icon_right.texture_size[1] + dp(20),                 0

    MDIconButton:
        icon: "eye-off"
        ripple_scale: .5
        pos_hint: {"center_y": .5}
        pos: text_field.width - self.width + dp(8), 0
        on_release:
            self.icon = "eye" if self.icon == "eye-off" else "eye-off"
            text_field.password = False if text_field.password is True else True

#:kivy 1.11.1
<Account_info>


    MDBoxLayout:
        #orientation: "vertical"
        #md_bg_color: 1,0,0,1
        #size_hint_y: None
        adaptive_width: True
        adaptive_height: True

        pos_hint: {"center_x": .5, "top": 1}
        spacing: "3sp"
        MDFillRoundFlatButton:
            id: bombs_game_start
            text: "Назад"
            font_size: "30sp"
            #icon: "play"
            #icon_right: "play"
            font_name: "images/main_font.ttf"
            #pos_hint: {"center_x": .5,"center_y": .4}
            #pos_hint: {"left": 1, "top": 1}
            #pos_hint: {"left": .9, "top": .9}
            on_release: root.manager.current = "clicker"
            #center_x: self.parent.center_x
        MDFillRoundFlatButton:
            id: bombs_game_start
            text: "Выйти"
            font_size: "30sp"
            #icon: "play"
            #icon_right: "play"
            #pos_hint: {"left": .9, "top": .99}
            font_name: "images/main_font.ttf"
            #pos_hint: {"center_x": .5,"center_y": .4}
            #pos_hint: {"left": 1, "top": 1}
            on_release: root.sign_out()
            #center_x: self.parent.center_x
        MDFillRoundFlatButton:
            id: bombs_game_start
            text: "Изменить"
            font_size: "30sp"
            #icon: "play"
            #icon_right: "play"
            #pos_hint: {"left": .9, "top": .99}
            font_name: "images/main_font.ttf"
            #pos_hint: {"center_x": .5,"center_y": .4}
            #pos_hint: {"left": 1, "top": 1}
            on_release: root.edit_profile(on_edit=root.on_enter)
            #center_x: self.parent.center_x
        MDFillRoundFlatButton:
            id: bombs_game_start
            text: "Удалить"
            font_size: "30sp"
            #icon: "play"
            #icon_right: "play"
            color: 1,0,0,1
            #pos_hint: {"right": 1, "top": .99}
            font_name: "images/main_font.ttf"
            #pos_hint: {"center_x": .5,"center_y": .4}
            #pos_hint: {"left": 1, "top": 1}
            on_release: root.delete_account_confirm()
            #center_x: self.parent.center_x

    CustomLabel:
        text: "Star ID"

        font_style: "Subtitle1"
        pos_hint: {"center_x": .5, "center_y": .9}
        halign: "center"
        font_size: "45sp"
        font_name: "images/main_font.ttf"
    Image:
        id: avatar

        #size_hint: (1,1)
        #background_color: 1,0,0,1
        pos_hint: {"center_x": .5, "center_y": .75}
        size_hint : None,None
        source: "images/avatar.png"
        #pos_hint: {"center_x": .5}
        size: 200,200

        #nocache: True

        #source: "images/avatar.png"




    CustomLabel:
        text: "Имя:"

        font_style: "Subtitle1"

        halign: "center"
        pos_hint: {"center_y": .6}
        font_size: "40sp"
        font_name: "images/main_font.ttf"
    CustomLabel:
        id: player_name
        #text: "attreya01@gmail.com"
        #opacity:

        font_size: "30sp"
        pos_hint: {"center_y": .55}
        font_name: "images/main_font.ttf"
        halign: "center"

        #font_style: "Subtitle1"
        height: self.texture_size[1]

    CustomLabel:
        text: "Привилегия:"

        font_style: "Subtitle1"

        halign: "center"
        pos_hint: {"center_y": .5}
        font_size: "40sp"
        font_name: "images/main_font.ttf"
    CustomLabel:
        id: privilege
        #text: "attreya01@gmail.com"
        #opacity: 0

        font_size: "30sp"
        pos_hint: {"center_y": .45}
        font_name: "images/main_font.ttf"
        halign: "center"

        #font_style: "Subtitle1"
        #height: self.texture_size[1]

    CustomLabel:
        text: "Пароль:"


        halign: "center"
        pos_hint: {"center_y": .4}
        font_size: "40sp"
        font_name: "images/main_font.ttf"


    CustomLabel:
        id: player_password
        #text: "attreya01@gmail.com"
        #opacity: 0
        #password
        font_size: "30sp"
        pos_hint: {"center_y": .35}
        font_name: "images/main_font.ttf"
        halign: "center"

        password: True
        #md_bg_color: 1,0,0,1
        on_touch_down: root.hide_password(self)
    CustomLabel:

        #text: "attreya01@gmail.com"
        #opacity: 0

        #password
        size_hint_y: .5
        text: "(Нажмите, чтобы показать/скрыть пароль)"
        font_size: "18sp"
        pos_hint: {"center_y": .3}
        opacity: .6
        font_name: "images/main_font.ttf"
        halign: "center"

        password: True
                #md_bg_color: 1,0,0,1

                #font_style: "Subtitle1"
                #height: self.texture_size[1]

#                MDIconButton:
#                    icon: "eye-off"
#                    #ripple_scale: .5
#                    pos_hint: {"center_y": .5, "center_x": .5}
#
#                    font_size: "30sp"
#                    #pos: text_field.width - self.width + dp(8), 0
#                    on_release:
#                        self.icon = "eye" if self.icon == "eye-off" else "eye-off"
#                        player_password.opacity = 0 if player_password.opacity == 1 else 1

<Edit_profile>

    orientation : 'vertical'
    #size_hint: .7,.5
    #size : 400,600
    pos_hint : {"center_x":.5,"center_y":.5}
    #elevation : 15
    #md_bg_color: [35/255,49/255,48/255,1]
    padding : 20
    spacing : 30
    AsyncImage:
        id: avatar_image
        source: "images/classic_avatar.png"
        size_hint : None,None
        pos_hint: {"center_x": .5}
        size: 160,160

    MDTextFieldRound :
        id: avatar
        hint_text : "Ссылка аватара"
        #size_hint : .6,.6
        font_name: "images/main_font.ttf"
        icon_right : "web"
#                    width : 270

        font_size: "20sp"

        pos_hint : {"center_x":.5}

        color_active : [1,1,1,1]
        on_text: root.load_avatar(self.text)
    MDTextFieldRound:
        id: name_r
        hint_text: "Имя"
        #size_hint_x: None
        font_name: "images/main_font.ttf"
        icon_right: "account"
        font_size: "20sp"
        pos_hint: {"center_x":.5}

        color_active: [1,1,1,1]

    ClickableTextFieldRound:
        id: password_r
        hint_text: "Пароль"
        #password: True
        #size_hint_x: None
        font_name: "images/main_font.ttf"
        #icon_right: "eye-off"
        font_size: "20sp"
        pos_hint: {"center_x":.5}

        color_active: [1,1,1,1]
    MDBoxLayout:
        #pos_hint: {"center_x":.5}
        spacing: "5sp"
        halign: "center"

        MDFillRoundFlatButton:
            text: "Отмена"
            font_size: "25sp"
            size_hint: (.3, None)
            font_name: "images/main_font.ttf"
            pos_hint: {"center_x":.5}
            #theme_text_color: "Custom"
            halign: "center"
            on_release: root.main_dialog.dismiss()
        MDFillRoundFlatButton:
            text: "Сохранить"
            font_size: "25sp"
            size_hint: (.3, None)
            font_name: "images/main_font.ttf"
            halign: "center"
            #theme_text_color: "Custom"
            pos_hint: {"center_x":.5}
            on_release: root.edit()
<Navigate_without_account>:
    MDBoxLayout:
        #id: False
        orientation: 'vertical'
        padding: "8dp"
        spacing: "8dp"
        MDFillRoundFlatButton:

            #size_hint: .3, .3
            text: "Авторизация"
            pos_hint: {"center_x":.5}

            font_size: 25
            on_release: root.to_auth()
<Navigate_with_account>:
    #FloatLayout:
#        id: True
#        MDBoxLayout:
    MDBoxLayout:
        orientation: 'vertical'
        padding: "8dp"
        spacing: "8dp"
        AsyncImage:
            id: avatar
            size_hint: (1,1)
            #source: "purple.png"
        CustomLabel:
            id: player_name
            #text: "Attreya"
            font_style: "Subtitle1"
            size_hint_y: None
            height: self.texture_size[1]
        CustomLabel:
            id: player_login
            #text: "attreya01@gmail.com"
            size_hint_y: None
            font_style: "Caption"
            height: self.texture_size[1]
        ScrollView:
            MDList:
                id: md_list
                OneLineIconListItem:
                    text: "Присоединяйся!"
                    on_release: root.open_support()
                    IconLeftWidget:
                        icon: "discord"
                OneLineIconListItem:
                    text: "Выйти"
                    on_release: root.sign_out()
                    IconLeftWidget:
                        icon: "logout"
        #Screen:


#<RightText@IRightBodyTouch+CustomLabel>
# ['H1', 'H2', 'H3', 'H4', 'H6', 'H6', 'Subtitle1', 'Subtitle2', 'Body1', 'Body2', 'Button', 'Caption', 'Overline', 'Icon']
<CustomLabel>:
    text_autoupdate: True
    color: 0, 0, 0, 1
    text_size: root.width, None
    markup: True

#<Screens>:
#    Loading
#    Auth
#    Clicker
<RightText>:

    color: 0,0,0,1
    #halign: "center"
    font_name: "images/main_font.ttf"
    font_size: "25sp"
<Check>:
    on_active: root.on_active
    group: 'group'
    size_hint: None, None
    size: dp(48), dp(48)
#<Tab>:
    #orientation: "vertical"
    #size_hint: 1,1
    #pos_hint: {"center_x": .5, "center_y": .5}
    #border_radius: 5
    #radius: [5]
    #elevation: 20
<Error_show>:
    MDBoxLayout:
        orientation: "vertical"
        spacing: 10
        CustomLabel:
            font_style: "H2"
            color: 0,0,0,1
            halign: "center"
            text: "Ошибка!!!"
        CustomLabel:

            color: 0,0,0,1
            halign: "center"
            text: "Произошла ошибка подключения к интернету или wifi.\nЕсли вы подключены к wifi, то проверьте корректность его работы. \nЕсли вы используете мобильные интернет, то проверьте его работоспособность. \nЕсли вы уверены, что у вас работает интренет, поробуте перезапустить приложение."
            #text_size: self.width, None
        MDFillRoundFlatButton:

            #size_hint: .3, .3
            text: "Повторить еще раз"
            pos_hint: {"center_x":.5}

            font_size: 40
            on_release: root.reconnect()
        MDFillRoundFlatButton:

            #\md_bg_color: 1, 1, 1, 1
            #size_hint: .3, .3
            font_size: 40
            text: "Оффлайн майнинг"
            pos_hint: {"center_x":.5}

            #text_color: .1, .6, .8, 1
            #theme_text_color: "Custom"
            on_release: root.try_offline()



<Loading>:
    name: "loading"
    CustomLabel:
        id: loading
        text: "Загрузка..."
        font_name: "images/main_font.ttf"
        font_size: "28sp"
        halign: "center"
        opacity: 1
        pos_hint: {'center_x': .5, 'center_y': .5}
#    MDSpinner:
#        size_hint: None, None
#        size: dp(46), dp(46)
#        pos_hint: {'center_x': .5, 'center_y': .5}
#        active: True

<Auth>:
    name: "auth"

    MDBottomNavigation:
        name: "auth"
        id: auth
        #color stuff
        #panel_color: 0,0,1,1

        MDBottomNavigationItem:
            text: "Регистрация"
            icon: "account"
            name: "registration"

            FloatLayout:

                canvas:
                    Color:
                        rgb: [35/255,49/255,48/255,1]
                    Rectangle:
                        pos: self.pos
                        size: self.size
                MDIconButton:
                    icon: "arrow-left"
                    theme_text_color: "Custom"
                    user_font_size: "35sp"
                    text_color: 1,1,1,1
                    pos_hint: {"left": 1, "top": 1}
                    on_release: root.manager.current = "clicker"
                CustomLabel :
                    text : "Star ID"
                    font_style : "Button"
                    font_size: "60sp"
                    halign : "center"
                    size_hint_y : None
                    pos_hint: {"top": .95}
                    theme_text_color: "Custom"
                    color: 1,1,1,1
                    font_name: "images/main_font.ttf"
                    height : self.texture_size[1]
                    padding_y : 30
                MDBoxLayout:
                    size_hint_x: .8
                    adaptive_height: True
                    orientation: "vertical"
                    #size : 400,600
                    pos_hint : {"center_x":.5,"center_y":.5}
                    #elevation : 15
                    #md_bg_color: [35/255,49/255,48/255,1]
                    padding : 20
                    spacing : 30

                    CustomLabel :
                        text : "Регистрация"
                        font_style : "Button"
                        font_size: "35sp"
                        halign : "center"
                        size_hint_y : None
                        theme_text_color: "Custom"
                        color: 1,1,1,1
                        font_name: "images/main_font.ttf"
                        height : self.texture_size[1]
                        padding_y : 30
                    AsyncImage:
                        id: avatar_image
                        source: "images/classic_avatar.png"
                        size_hint : None,None
                        pos_hint: {"center_x": .5}
                        size: 160,160

                    MDTextFieldRound :
                        id: avatar
                        hint_text : "Ссылка аватара"
                        #size_hint : .6,.6
                        font_name: "images/main_font.ttf"
                        icon_right : "web"
    #                    width : 270

                        font_size: "20sp"

                        pos_hint : {"center_x":.5}

                        color_active : [1,1,1,1]
                        on_text: root.load_avatar(self.text)
                    MDTextFieldRound:
                        id: name_r
                        hint_text: "Имя"
                        #size_hint_x: None
                        font_name: "images/main_font.ttf"
                        icon_right: "account"
                        font_size: "20sp"
                        pos_hint: {"center_x":.5}

                        color_active: [1,1,1,1]
#                    MDTextFieldRound:
#                        id: email_r
#                        hint_text: "Логин"
#                        #size_hint_x: None
#                        font_name: "images/main_font.ttf"
#                        icon_right: "email"
#                        font_size : 30
#                        pos_hint: {"center_x":.5}
#
#                        color_active: [1,1,1,1]
                    ClickableTextFieldRound:
                        id: password_r
                        hint_text: "Пароль"
                        #password: True
                        #size_hint_x: None
                        font_name: "images/main_font.ttf"
                        #icon_right: "eye-off"
                        font_size: "20sp"
                        pos_hint: {"center_x":.5}

                        color_active: [1,1,1,1]

                    MDFillRoundFlatButton:
                        text: "Регистрация"
                        font_size: "23sp"
                        font_name: "images/main_font.ttf"
                        pos_hint: {"center_x":.5}
                        theme_text_color: "Custom"

                        on_release: root.registration()


        MDBottomNavigationItem:
            text: "Вход"
            name: "login"
            icon: "account"


            FloatLayout:
                canvas:
                    Color:
                        rgb: [35/255,49/255,48/255,1]
                    Rectangle:
                        pos: self.pos
                        size: self.size
                MDIconButton:
                    icon: "arrow-left"
                    theme_text_color: "Custom"
                    user_font_size: "35sp"
                    text_color: 1,1,1,1
                    pos_hint: {"left": 1, "top": 1}
                    on_release: root.manager.current = "clicker"
                CustomLabel :
                    text : "Star ID"
                    font_style : "Button"
                    font_size: "60sp"
                    halign : "center"
                    size_hint_y : None
                    pos_hint: {"top": .95}
                    theme_text_color: "Custom"
                    color: 1,1,1,1
                    font_name: "images/main_font.ttf"
                    height : self.texture_size[1]
                    padding_y : 30
                MDBoxLayout:
                    size_hint_x: .8
                    adaptive_height: True
                    #size: 400,600
                    pos_hint: {"center_x":.5,"center_y":.5}
                    #elevation: 15
                    #md_bg_color: [35/255,49/255,48/255,1]

                    #padding: 20
                    spacing: "20sp"
                    #md_bg_color:
                    orientation: "vertical"
                    # Adding items to the card

                    CustomLabel:
                        text: 'Вход'
                        font_style: 'Button'
                        font_size: "35sp"
                        halign: "center"
                        size_hint_y: None
                        theme_text_color: "Custom"
                        color: 1,1,1,1
                        font_name: "images/main_font.ttf"
                        height: self.texture_size[1]
                        padding_y: 15
                    MDTextFieldRound:
                        id: name_l
                        hint_text: "Имя"
                        icon_right: "account"
                        #size_hint_x: None
                        font_name: "images/main_font.ttf"
                        font_size: "20sp"
                        #size_hint_x: .5
                        pos_hint: {"center_x":.5}
                        color_active: [1,1,1,1]
                    ClickableTextFieldRound:
                        id: password_l
                        hint_text: "Пароль"
                        #icon_right: "eye-off"
                        #size_hint_x: None
                        font_name: "images/main_font.ttf"
                        font_size: "20sp"
                        pos_hint: {"center_x":.5}
                        color_active: [1,1,1,1]
                        #password: True
                    MDFillRoundFlatButton:
                        text: 'Войти'
                        font_name: "images/main_font.ttf"
                        pos_hint: {"center_x":.5}
                        font_size: "23sp"
                        on_release: root.login()

<Settings_gui>:

    MDTabs:
        lock_swiping: True
        Tab:
            text: "Аккаунт"
            Button:

                text: "<Сохранить"
                size_hint: .2,.1
                pos_hint_y: .9
                on_release: root.u()


            Label:
                id: f
                text: "Ваш аккаунт"
                color: 0,0,0,1
        Tab:
            text: "Шрифт"
            Button:

                text: "<Сохранить"
                size_hint: .2,.1
                pos_hint_y: .9
                on_release: root.back()
            Label:
                text: "Размер шрифта"
                color: 0,0,0,1
            MDSlider:
                id: settings_font_slider
                min: 0

                max: 100
                step: 1
                on_touch_up: root.set_font()
                size_hint: .8,.3
                pos_hint: {"center_x":.5,"center_y":.1}
                orientation: 'horizontal'

<Chest_content>

    #orientation: "vertical"
    #spacing: "12dp"
    pos_hint: {"center_y": .5}
    #md_bg_color: 1,0,0,1
    #size_hint_y: .5
#    CustomLabel:
#        halign: "center"
#        text: "Открыть сундук"
#        font_size: 20
#        #ize_hint_y: .4
    #BoxLayout:


    MDFillRoundFlatButton:


        font_size: "20sp"
        halign: "center"
        pos_hint: {"center_y": .65 , "center_x": .5}

        text: "Посмотреть видео"
        on_release: app.game.show_rewarded_ad()
    MDFillRoundFlatButton:
        name: "chest"
        #\md_bg_color: 1, 1, 1, 1
        #size_hint: .3, .3
        font_size: "20sp"

        #halign: "center"
        pos_hint: {"center_y": .35 , "center_x": .5}

        text: "Открыть за " + "{0:.6f}".format(app.game.player_data["chest"]["price"]) + " TON"
        on_release: app.game.buy(obj=self)
    MDFlatButton:
        text: "Отмена"
        font_size: "20sp"
        font_name: "images/main_font.ttf"
        pos_hint: {"right": 1, "center_y": .1}
        on_release: app.game.chest_dialog.dismiss()
<Clicker>
    name: "clicker"
    id: main_gui
    main_font_size: 29
    orientation: 'vertical'


    MDBottomNavigation:
        name: "tools"
        id: tools
        #color stuff
        #panel_color: 0,0,1,1

        MDBottomNavigationItem:
            name: 'main'
            text: "Майнинг"

            icon: 'diamond-stone'
            id: hi


            Image:
                source: "images/background.png"
                allow_stretch: True
                keep_ratio: False

            MDToolbar:


                pos_hint: {"top": 1}

                size_hint_y: .07
                #left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]
                #title:'Настройки'

                #size_hint_y: .07
                left_action_items:[['account-circle', lambda x: root.open_account_info()]]
                right_action_items:[['information',lambda x: root.show_info()]]
                #elevation:10
                #md_bg_color: 0,0,100/255,1
            MDBoxLayout:
                size_hint_y: None

                #md_bg_color: 1,0,0,1
                spacing: "5sp"
                orientation: "vertical"
                pos_hint: {"center_x": .5, "center_y": .85}
                CustomLabel:
                    #size_hint: None, None
                    #size: 200, 200
                    id: lvl_text

                    color: 1,1,1,1
                    halign: "center"
                    text: "Lvl: 0"
                    #pos_hint: {"center_y": .80}
                    #size_hint: 1,1
                    font_size: "27sp"
                    font_name: "images/main_font.ttf"
                MDProgressBar:
                    id: lvl_bar
                    max: 100
                    size_hint_x: .5
                    pos_hint: {"center_x": .5}
                    color: 1,.2,.2,1
            ButImage:
                id: privilege_icon

                size_hint: (.1,.1)

                source: 'images/player.png'

                pos_hint: {"right": 1, "top": .9}

                on_release: print(123)

            ButImage:
                id: mining_button

                size_hint: (.45,.45) if self.state == 'down' else (.48,.48)

                source: 'images/blue.png'

                pos_hint: {"center_x":.5,"center_y":.34}

                on_release: root.on_tap()


            CustomLabel:
                #size_hint: None, None
                #size: 200, 200
                id: TON_num

                color: 1,1,1,1
                halign: "center"
                pos_hint: {"center_y":.75}
                #size_hint: 1,1
                font_size: "35sp"
                font_name: "images/main_font.ttf"
#            MDIcon:
#                id: tired_icon
#                icon: "lightning-bolt"
#                #text: "212222"
#                font_size: "35sp"
#                halign: "center"
#                #size_hint: .3, .3
#                color: "ffac33"
#                pos_hint: {"center_x":.43,"center_y":.60}
            Image:
                id: tired_icon
                source: "images/tired.png"
                size_hint: .1,.1
                #color: 1,0,0,.5
                pos_hint: {"center_x":.43,"center_y":.60}
            Label:
                #size_hint: None, None
                #size: 200, 200
                id: tired_num

                color: 1,1,1,1
                #halign: "center"
                pos_hint: {"center_x":.53,"center_y":.60}
                #size_hint: 1,1
                #text: "⚡gerfdsa"
                color: 1,.8,0,1
                font_size: "35sp"
                font_name: "images/main_font.ttf"
            ButImage:
                id: chest
                source: "images/chest_normal.png"
                #anim_delay: .05
                size_hint: .2,.2
                pos_hint: {"right": 1}
                on_release: root.chest_panel()
            #NavigationLayout:
            MDNavigationDrawer:
                id: nav_drawer1
                orientation: "vertical"
                padding: "8dp"
                spacing: "8dp"
                #GridLayout:
                MDBoxLayout:
                    id: nav_drawer_player
                    orientation: 'vertical'

                    #padding: "1dp"
                    #spacing: "1dp"

                    AsyncImage:
                        id: avatar

                        #size_hint: (1,1)
                        #background_color: 1,0,0,1
                        source: "images/avatar.png"

                    MDBoxLayout:
                        #orientation: "vertical"

                        CustomLabel:
                            id: player_name
                            #text: "Attreya"
                            font_style: "Subtitle1"
                            size_hint_y: None
                            font_size: "20sp"
                            font_name: "images/main_font.ttf"

                        CustomLabel:
                            id: privilege
                            #text: "Attreya"
                            font_style: "Subtitle1"
                            halign: "right"
                            size_hint_y: None
                            font_size: "20sp"
                            font_name: "images/main_font.ttf"
                    MDBoxLayout:
                        CustomLabel:
                            id: player_password
                            #text: "attreya01@gmail.com"
                            opacity: 0
                            size_hint_y: None
                            font_size: "20sp"
                            font_name: "images/main_font.ttf"
                            pos_hint: {"center_y": .5}
                            #font_style: "Subtitle1"
                            height: self.texture_size[1]

                        MDIconButton:
                            icon: "eye-off"
                            #ripple_scale: .5
                            pos_hint: {"center_y": .5}
                            halign: "right"
                            #pos: text_field.width - self.width + dp(8), 0
                            on_release:
                                self.icon = "eye" if self.icon == "eye-off" else "eye-off"
                                player_password.opacity = 0 if player_password.opacity == 1 else 1


                ScrollView:
                    id: nav_drawer_scroll
                    MDList:
                        id: nav_drawer_items
                        OneLineIconListItem:
                            text: "Присоединяйся к нам!"
                            on_press: root.open_support()
                            IconLeftWidget:

                                icon: "contactless-payment"

                        OneLineIconListItem:
                            text: "Редактировать профиль"
                            on_press: [root.edit_profile()]
                            IconLeftWidget:
                                icon: "account-edit"


                        OneLineIconListItem:
                            text: "Выйти"
                            on_press: [root.sign_out()]
                            IconLeftWidget:
                                icon: "logout"
                        OneLineIconListItem:
                            text: "Удалить профиль"
                            on_press: root.delete_account_confirm()
                            IconLeftWidget:
                                icon: "account-cancel"
            MDNavigationDrawer:
                id: nav_drawer2
                orientation: "vertical"
                padding: "8dp"
                spacing: "8dp"
            #GridLayout:
                FloatLayout:
                    CustomLabel:
                        text: "Вы не вошли в аккаунт!"
                        font_size: "25sp"
                        halign: "center"
                        font_name: "images/main_font.ttf"
                        pos_hint: {"center_x":.5, "center_y":.6}
                    MDFillRoundFlatButton:
                        id: nav_drawer_button
                        #size_hint: .3, .3
                        text: "Авторизация"
                        pos_hint: {"center_x":.5, "center_y":.4}
                        font_name: "images/main_font.ttf"
                        font_size: "30sp"
                        on_release: root.to_auth()
#                CustomLabel:
#                    text: "Ваш аккаунт"
#                    #font_size: "40sp"
#                    font_style: "Button"
#                    size_hint_y: None
#                    height: self.texture_size[1]
#
#                AnchorLayout:
#                    anchor_x: "left"
#                    size_hint_y: None
#                    height: avatar.height
#
#                    AsyncImage:
#                        id: avatar
#                        size_hint: None, None
#                        #size: "56dp", "56dp"
#                        #source: ""
#
#                CustomLabel:
#                    id: player_name
#                    text: "Аккаунт"
#                    font_style: "C"
#                    size_hint_y: None
#                    height: self.texture_size[1]
#
#                CustomLabel:
#                    id: player_login
#                    text: "Логин"
#                    font_style: "Button"
#                    size_hint_y: None
#                    height: self.texture_size[1]


#            ButImage:
#                #markup: True
#                #font_name: "images/main_font.ttf"
#                #font_size: "20sp"
#                theme_text_color: "Custom"
#                text_color: 1,1,1,1
#                #size_hint: .5, .1
#                halign: "center"
#                #text: 'Присоединяйся к нам в Discord!'
#                pos_hint: {"center_x":.5,"center_y":.17}
#                source: "join_discord.png"
#                on_release: webbrowser.open("https://discord.com/invite/YAgpJhH5")



        MDBottomNavigationItem:
            id: store
            text: "Магазин"
            icon: 'cart'
            name: 'store'
            MDBoxLayout:
                orientation: "vertical"
                MDToolbar:
                    id: shop_bar
                    size_hint_y: .1

                    left_action_items:[['home', lambda x: swichToScreen(shop_types, "shop_buttons")]]
                    #anchor_title: "center"
                    #font_name: "images/main_font.ttf"

                    #MDBoxLayout:

#                    MDChip:
#                        id: ton_num_shop
#                        #size_hint: (.1,None)
#                        #halign: "right"
#                        #pos_hint: {"right": .9}
#                        #icon: ""
#                        #md_bg_color: 1,0,0,1
#                        pos_hint: {"right": .9}
#                        #size_hint_x: .2
#                        #label: 'Coffee'
#                        #color: .4470588235118, .1960787254902, 0, 1
#                        icon: 'diamond-stone'
                    MDBoxLayout:
                        CustomLabel:
                            id: ton_num_shop
                            size_hint_x: .1
                            halign: "right"
                            pos_hint: {"center_x": .9}
                            font_name: "images/main_font.ttf"
                            font_size: "20sp"
                            color: 1,1,1,1
                            size_hint_x: .5
                            halign: "right"



#                        CustomLabel:
#
#                            id: ton_num_shop
#
#                            color: 1,1,1,1
#                            size_hint_x: .5
#                            halign: "right"
#                            text: "erfeds3"
                            #
                    #right_action_items:
                    #headline_text: "rfdcs"
                        #pos_hint: {"x": .9}
                        #text: "fedcs"

                ScreenManager:
                    id: shop_types
                    #lock_swiping: True
                    transition: NoTransition()
                    Screen:
                        name: "shop_buttons"


                        MDFillRoundFlatButton:
                            text: "Мышки для майнинга"
                            #size_hint_x: .5

                            pos_hint: {"center_x": .5, "center_y": .7}

                            font_size: "35sp"

                            font_name: "images/main_font.ttf"
                            on_release: shop_types.current = "mining_shop"
                       #
                        MDFillRoundFlatButton:
                            text: "Автомайнер и прочее"
                            #size_hint_x: .5

                            pos_hint: {"center_x": .5, "center_y": .4}

                            font_size: "35sp"

                            font_name: "images/main_font.ttf"

                            on_release: shop_types.current = "bot_shop"
                    Screen:
                        name: "mining_shop"



                        ScrollView:
                            id: scroll_mining

                            #size: self.size

                            #size_hint: 1,1
                            #pos_hint: {"center_x": .5}
                            #Удвоение майнинга
                            #MDList:
                                #orientation: "vertical"
                                #size_hint_y: None

                            #MDList:
                            ScrollContainer:
                                id: mining_shop
                                cols: 2
                                spacing: "5sp"


                    Screen:
                        name: "bot_shop"


                        RecycleView:
                            id: scroll_bot

                            ScrollContainer:
                                id: bot_shop
                                cols: 2
                                spacing: "5sp"
                                ShopItem:
                                    id: autominer
                                    text: "Автомайнер"
                                    name: "автомайнер"
                                    icon: "images/bot.png"
                                    lvl: 103

                                    secondary_text: "Цена: 1 TON"
                                    on_press: root.buy_confirm(obj=self)
#                    Tab:
#                        id: token
#                        name: token
#                        text: "Жетоны"
#                        FloatLayout:
#                            CustomLabel:
#                                text: "Купить жетоны для некоторых мини игр"
#                                halign: "center"
#                                font_name: "images/main_font.ttf"
#                                pos_hint: {"center_y": .8}
#
#                                font_size: "25sp"
#                            CustomLabel:
#                                id: token_price
#                                text: "Цена: ??? TON"
#                                halign: "center"
#                                font_name: "images/main_font.ttf"
#                                pos_hint: {"center_y": .5}
#
#                                font_size: "25sp"
#                            MDFillRoundFlatButton:
#                                name: "token"
#                                text: "Купить!"
#                                font_size: "25sp"
#
#                                font_name: "images/main_font.ttf"
#                                pos_hint: {"center_x":.5,"center_y":.2}
#                                on_release: root.buy(obj=self)
#                    Tab:
#                        title: "Скоро!!!"
#                        FloatLayout:
#                            CustomLabel:
#                                color: 0,0,0,1
#                                font_name: "images/main_font.ttf"
#                                font_size: "22sp"
#
#                                #size_hint: None, None
#                                #size: 200, 200
#
#                                halign: "center"
#                                text: "Скоро появятся новые акции!!! Ждите!!"
#                                #text_size: self.width, None
        MDBottomNavigationItem:
            text: "Топ 30"
            icon: "account"
            name: "top 30"

            on_tab_press: root.load_top()
            ScreenManager
                id: top_screens
                transition: NoTransition()
                Screen:
                    name: "normal"
                    BoxLayout:
                        orientation: "vertical"
        #                FloatLayout:
        #                    cols: 2
        #                    size_hint_y: .1
                        CustomLabel:
                            text: "Топ 30 игроков"
                            font_name: "images/main_font.ttf"
                            font_size: "30sp"
                            pos_hint: {"center_x": .5}
                            halign: "center"
                            size_hint_y: .1

                            #color: C("2196f3")

        #                Image:
        #                    #pos: self.pos
        #                    pos_hint: {"center_x": .1}
        #                    source: "gold_medal.png"



                        RecycleView:
                            id: scroll_top
                            MDList:
                                id: players_top
                Screen:
                    name: "loading"
                    CustomLabel:
                        id: loading_top_text
                        text: "Загрузка..."
                        font_name: "images/main_font.ttf"
                        font_size: "30sp"
                        halign: "center"

                        pos_hint: {'center_x': .5, 'center_y': .5}
                Screen:
                    name: "error"

                    CustomLabel:
                        id: error_load_top
                        text: "Произошла ошибка подключения!"
                        font_name: "images/main_font.ttf"
                        font_size: "25sp"
                        halign: "center"
                        pos_hint: {'center_x': .5, 'center_y': .5}

        MDBottomNavigationItem:
            id: games
            text: "Игры"
            icon: 'google-controller'
            name: 'games'
            MDBoxLayout:
                orientation: "vertical"
                MDToolbar:
                    size_hint_y: .1
                    title: "Мини игры"
                    MDBoxLayout:
                        #spacing: "2sp"
                        #md_bg_color: 1,0,0,1

                            #halign: "right"
                        #FloatLayout:

                        CustomLabel:
                            id: ton_num_games
                            size_hint_x: .1
                            halign: "right"
                            pos_hint: {"center_x": .9}
                            font_name: "images/main_font.ttf"
                            font_size: "20sp"
                            color: 1,1,1,1
                            size_hint_x: .5
                            #halign: "right"

                MDTabs:
                    lock_swiping: True
                    allow_stretch: False

                    Tab:

                        title: "Рулетка"



                        FloatLayout:
                            id: find_it1
                            #size_hint_x: .9
                            #pos_hint: {"center_x": .5}
                            CustomLabel:
                                #id: value_bet_text
                                text: "В этой мини игре вам нужно сделать ставку и крутить рулетку и вам может что - нибудь выпасть!"
                                font_size: "25sp"
                                font_name: "images/main_font.ttf"
                                size_hint: .95, .2

    #                            size: 200, 200
                                color: 0,0,0,1
                                halign: "center"

                                pos_hint: {"center_x": .5, "center_y":.8}
                                #text_size: self.width, None
                            CustomLabel:
                                id: value_bet_text
                                text: ""
                                font_size: "25sp"
                                font_name: "images/main_font.ttf"
                                size_hint: .95, .1

    #                            size: 200, 200
                                color: 0,0,0,1
                                halign: "center"

                                pos_hint: {"center_x": .5, "center_y":.6}
                                #text_size: self.width, None

                            MDSlider:
                                id: bet_value
                                min: 0

                                max: 100
                                hint: False
                                step: 1
                                on_touch_up: root.show_value(obj=self, name="value_bet_text")
                                size_hint: .8,.1
                                pos_hint: {"center_x":.5,"center_y":.5}
                                orientation: 'horizontal'
                            MDFillRoundFlatButton:
                                text: "Крутить"
                                font_size: "23sp"

                                font_name: "images/main_font.ttf"
                                pos_hint: {"center_x":.5, "center_y":.2}

                                #center_x: self.parent.center_x
                                #center_y: self.parent.center_y



                                on_release: root.start_game(name="roulette")

                    Tab:

                        name: "find_it"
                        title: "Бомбы"
                        FloatLayout:
                            id: bombs_layout

                            BoxLayout:
                                #size_hint_x: .9
                                #background_color: C("#1F1F21")
                                #spacing: "10sp"

                                orientation: "vertical"
                                CustomLabel:
                                    id: text_find_it
                                    text: "В этой мини игре вам предстоит среди 25 плит не наступить на бомбу."
                                    halign: "center"
                                    font_name: "images/main_font.ttf"
                                    size_hint_x: .95
                                    #md_bg_color: 1,0,0,1
                                    pos_hint: {"center_x": .5}

                                    font_size: "25sp"
                                CustomLabel:
                                    id: value_bet_find_it
                                    text: ""
                                    halign: "center"
                                    font_name: "images/main_font.ttf"
                                    size_hint_x: .95
                                    #md_bg_color: 1,0,0,1
                                    pos_hint: {"center_x": .5}
                                    #md_bg_color: 1,0,0,1
                                    font_size: "25sp"
                                MDSlider:
                                    id: bet_find_it
                                    min: 0

                                    max: 100
                                    hint: False
                                    step: 1
                                    on_touch_up: root.show_value(obj=self, name="value_bet_find_it")

                                    pos_hint: {"center_x":.5,"center_y":.5}
                                    orientation: 'horizontal'
                                CustomLabel:
                                    id: text_find_it
                                    text: "Количество бомб:"
                                    halign: "center"
                                    font_name: "images/main_font.ttf"
                                    pos_hint: {"center_x": .5}
                                    #md_bg_color: 1,0,0,1
                                    font_size: "25sp"
                                MDFloatLayout:

                                    id: bombs_num
                                    #adaptive_height: True
                                    #cols: 4
                                    size_hint_x: .9
                                    spacing: "10sp"
                                    halign: "center"

                                    pos_hint: {"center_x": .5}


                                    ButImage:
                                        id: five
                                        #id: find_it_start_button
                                        #text: "5"
                                        #font_size: "25sp"
                                        source: "images/5.png"

                                        #color: C("a09ea1")
                                        #font_name: "images/main_font.ttf"
                                        name: "5"
                                        size_hint: .45,.45
                                        pos_hint: {"center_x": .05, "center_y": .5}
                                        #opacity: .6
                                        #center_x: self.parent.center_x
                                        #center_y: self.parent.center_y
                                        on_release: root.game_state("bombs", 5, self)

                                    ButImage:
                                        id: ten
                                        #id: find_it_start_button
                                        #text: "5"
                                        #opacity: .6
                                        font_size: "25sp"
                                        source: "images/10.png"
                                        name: "10"

                                        size_hint: .45,.45
                                        #pos_hint: {"center_x": .5,"center_y": .4}
                                        pos_hint: {"center_x": .35, "center_y": .5}
                                        #center_x: self.parent.center_x
                                        #center_y: self.parent.center_y
                                        on_release: root.game_state("bombs", 10, self)
                                    ButImage:
                                        id: fifteen
                                        #id: find_it_start_button
                                        #text: "5"
                                        font_size: "25sp"
                                        #opacity: .6
                                        source: "images/15.png"
                                        size_hint: .45,.45
                                        name: "15"

                                        #pos_hint: {"center_x": .5,"center_y": .4}
                                        pos_hint: {"center_x": .65, "center_y": .5}
                                        #center_x: self.parent.center_x
                                        #center_y: self.parent.center_y
                                        on_release: root.game_state("bombs", 15, self)
                                    ButImage:
                                        id: twenty_five
                                        #id: find_it_start_button
                                        #text: "5"
                                        #font_size: "25sp"
                                        #opacity: .6
                                        source: "images/24.png"
                                        name: "24"
                                        #size_hint: .5,.5
                                        size_hint: .45,.45
                                        #pos_hint: {"center_x": .5,"center_y": .4}
                                        pos_hint: {"center_x": .95, "center_y": .5}
                                        #center_x: self.parent.center_x
                                        #center_y: self.parent.center_y
                                        on_release: root.game_state("bombs", 24, self)


                                MDFillRoundFlatIconButton:
                                    id: bombs_game_start
                                    text: "Сыграть"
                                    font_size: "30sp"
                                    icon: "play"
                                    #icon_right: "play"
                                    font_name: "images/main_font.ttf"
                                    #pos_hint: {"center_x": .5,"center_y": .4}
                                    pos_hint: {"center_x": .5}
                                    #center_x: self.parent.center_x
                                    #center_y: self.parent.center_y
                                    on_release: root.start_game("bombs")
                                Widget:
                                    size_hint_y: .3


                    Tab:
                        title: "Скоро!!!"
                        FloatLayout:
                            CustomLabel:
                                color: 0,0,0,1
                                #size_hint: None, None
                                #size: 200, 200
                                font_size: "22sp"
                                font_name: "images/main_font.ttf"
                                halign: "center"
                                text: "Скоро появятся новые мини игры!!! Ждите!!"
#        MDBottomNavigationItem:
#            id: auction
#            text: "Аукцион"
#            icon: "store"
##            BoxLayout:
##                Button:
##                    text: "load items"
##                    on_release: root.update_auction()
##                Button:
##                    text: "add item"
##                    on_release: root.add_auction()
#            #ScrollView:
#            MDBoxLayout:
#                orientation: "vertical"
#                #halign: "center"
#                #size_hint_x: .9
#                id: auction_items
##                CustomLabel:
##                    font_style: "H2"
##                    halign: "center"
##                    font_name: "images/main_font.ttf"
##                    text: "Извиниете!"
#                CustomLabel:
#                    font_style: "H4"
#                    halign: "center"
#                    font_name: "images/main_font.ttf"
#                    text: "В разработке"
#                CustomLabel:
#                    halign: "center"
#                    font_name: "images/main_font.ttf"
#                    font_size: "20sp"
#
#                    text: "Из-за того, что у нас ограниченный бюджет и маленькая база данных мы пока еще не добавили эту функцию в кликер. В будующем для продажи валюты потребуется привилегия VIP, если вы захотите поддержать проект и отправите сумму, больше 200 рублей, то вы автоматически становитесь VIP."
#                MDFillRoundFlatButton:
#
#                    #size_hint: .3, .3
#                    text: "Поддержать"
#                    font_name: "images/main_font.ttf"
#                    pos_hint: {"center_x":.5}
#                    md_bg_color: 0.1, 0.6, 0.9, 1.0
#                    font_size: 40
#                    on_release: app.donate()