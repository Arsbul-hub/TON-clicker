
<ButImage@ButtonBehavior+AsyncImage>

<SettingsTab>:
    orientation: "vertical"
    size_hint: 1,1
    pos_hint: {"center_x": .5, "center_y": .5}
    border_radius: 5
    radius: [5]
    elevation: 20
<Error_show>:
    MDBoxLayout:
        orientation: "vertical"
        spacing: 10
        MDLabel:
            font_style: "H1"
            color: 0,0,0,1
            halign: "center"
            text: "Ошибка!!!"
        MDLabel:

            color: 0,0,0,1
            halign: "center"
            text: "Произошла ошибка подключения к интернету или wifi.\nЕсли вы подключены к wifi, то проверьте корректность его работы. \nЕсли вы используете мобильные интернет, то проверьте его работоспособность. \nЕсли вы уверены, что у вас работает интренет, поробуте перезапустить приложение."
            #text_size: self.width, None
        MDFillRoundFlatButton:

            #size_hint: .3, .3
            text: "Повторить еще раз"
            pos_hint: {"center_x":.5}

            font_size: 40
            on_press: root.reconnect()
        MDFillRoundFlatButton:

            #\md_bg_color: 1, 1, 1, 1
            #size_hint: .3, .3
            font_size: 40
            text: "Оффлайн майнинг"
            pos_hint: {"center_x":.5}

            #text_color: .1, .6, .8, 1
            #theme_text_color: "Custom"
            on_press: root.try_offline()
ScreenManagement:
    #transition: FadeTransition()
    id: d
    Error_show
    Settings_gui
    Auth
    Clicker
    Loading
<Loading>:

    MDSpinner:
        size_hint: None, None
        size: dp(46), dp(46)
        pos_hint: {'center_x': .5, 'center_y': .5}
        active: True

<Auth>:


    MDBottomNavigation:
        name: "auth"
        id: auth
        #color stuff
        #panel_color: 0,0,1,1

        MDBottomNavigationItem:
            text: "Регистрация"
            icon: "account"
            name: "registration"

            FloatLayout:
                canvas:
                    Color:
                        rgb: [35/255,49/255,48/255,1]
                    Rectangle:
                        pos: self.pos
                        size: self.size
                MDBoxLayout:
                    orientation : 'vertical'
                    size_hint: .5,.5
                    #size : 400,600
                    pos_hint : {"center_x":.5,"center_y":.5}
                    #elevation : 15
                    #md_bg_color: [35/255,49/255,48/255,1]
                    padding : 20
                    spacing : 30

                    MDLabel :
                        text : "Регистрация"
                        font_style : "Button"
                        font_size : 40
                        halign : "center"
                        size_hint_y : None
                        font_name: "main_font.ttf"
                        height : self.texture_size[1]
                        padding_y : 30
                    AsyncImage:
                        id: avatar_image
                        source: "classic_avatar.png"
                        size_hint : None,None
                        pos_hint: {"center_x": .5}
                        size: 90,90

                    MDTextFieldRound :
                        id: avatar
                        hint_text : "url аватара"
                        #size_hint : .6,.6
                        font_name: "main_font.ttf"
                        icon_right : "account"
    #                    width : 270

                        font_size : 25

                        pos_hint : {"center_x":.5}

                        color_active : [1,1,1,1]
                        #on_focus: root.load_avatar(self.text)
                    MDTextFieldRound:
                        id: name_r
                        hint_text: "Имя"
                        #size_hint_x: None
                        font_name: "main_font.ttf"
                        icon_right: "account"
                        font_size : 25
                        pos_hint: {"center_x":.5}

                        color_active: [1,1,1,1]
                    MDTextFieldRound:
                        id: email_r
                        hint_text: "Логин"
                        #size_hint_x: None
                        font_name: "main_font.ttf"
                        icon_right: "account"
                        font_size : 25
                        pos_hint: {"center_x":.5}

                        color_active: [1,1,1,1]
                    MDTextFieldRound:
                        id: password_r
                        hint_text: "Пароль"
                        password: True
                        #size_hint_x: None
                        font_name: "main_font.ttf"
                        icon_right: "eye-off"
                        font_size : 25
                        pos_hint: {"center_x":.5}

                        color_active: [1,1,1,1]

                    MDRoundFlatButton:
                        text: "Регистрация"
                        font_size: 20
                        font_name: "main_font.ttf"
                        pos_hint: {"center_x":.5}
                        theme_text_color: "Custom"

                        on_press: root.registration()

                    #height: 30
#                AsyncImage:
#                    id: avatar_image
#                    source: "https://i.ibb.co/zr8HtNr/classic-avatar.png"
#                Label:
#                    text: "Введите url картинки в качестве аватара:"
#                    color: 1,1,1,1
#                    size_hint: None, None
#                    width: 300
#                    height: 50
#                    font_name: "main_font.ttf"
#                    font_size: "16sp"
#                    pos_hint: {"center_x":.5}
#                TextInput:
#                    id: avatar
#
#                    size_hint: None, None
#                    width: 300
#                    height: 50
#                    font_name: "main_font.ttf"
#                    font_size: "40sp"
#
#                    pos_hint: {"center_x":.5}
#                    multiline: False
#                    on_text_validate: root.load_avatar(self.text)
#                Label:
#                    text: "Введите имя:"
#                    color: 1,1,1,1
#                    size_hint: None, None
#                    width: 300
#                    height: 50
#                    font_name: "main_font.ttf"
#                    font_size: "16sp"
#                    pos_hint: {"center_x":.5}
#                TextInput:
#                    id: name_r
#
#                    size_hint: None, None
#                    width: 300
#                    height: 50
#                    font_name: "main_font.ttf"
#                    font_size: "40sp"
#
#                    pos_hint: {"center_x":.5}
#                    multiline: False
#                Label:
#                    text: "Введите логин:"
#                    color: 1,1,1,1
#                    size_hint: None, None
#                    width: 300
#                    height: 50
#                    font_name: "main_font.ttf"
#                    font_size: "16sp"
#                    pos_hint: {"center_x":.5}
#                TextInput:
#                    id: email_r
#                    size_hint: None, None
#                    width: 300
#                    height: 50
#                    font_name: "main_font.ttf"
#                    font_size: "40sp"
#                    pos_hint: {"center_x":.5}
#                    multiline: False
#                Label:
#                    text: "Введите пароль:"
#                    color: 1,1,1,1
#                    font_name: "main_font.ttf"
#                    font_size: "16sp"
#                    size_hint: None, None
#                    width: 300
#                    height: 50
#                    pos_hint: {"center_x":.5}
#                TextInput:
#                    size_hint: None, None
#                    width: 300
#                    height: 50
#                    id: password_r
#                    font_name: "main_font.ttf"
#                    font_size: "40sp"
#                    pos_hint: {"center_x":.5}
#                    multiline: False
#                MDFillRoundFlatButton:
#
#                    md_bg_color: 1, 1, 1, 1
#                    #size_hint: .3, .1
#
#                    pos_hint: {"center_x":.5}
#
#
#                    text: "Зарегистриоваться"
#                    text_color: .1, .6, .8, 1
#                    on_press: root.registration()
        MDBottomNavigationItem:
            text: "Вход"
            name: "login"
            icon: "account"
#
#            MDBoxLayout:
#                md_bg_color: app.theme_cls.primary_color
#                size_hint: .9, .9
#                pos_hint: {"center_x":.5, "center_y":.5}
#
#                orientation: "vertical"

            FloatLayout:
                canvas:
                    Color:
                        rgb: [35/255,49/255,48/255,1]
                    Rectangle:
                        pos: self.pos
                        size: self.size
                MDBoxLayout:
                    size_hint: .5,.5
                    #size: 400,600
                    pos_hint: {"center_x":.5,"center_y":.5}
                    #elevation: 15
                    md_bg_color: [35/255,49/255,48/255,1]
                    padding: 20
                    spacing: 30
                    orientation: "vertical"
                    # Adding items to the card
                    MDLabel:
                        text: 'Вход'
                        font_style: 'Button'
                        font_size: 45
                        halign: "center"
                        size_hint_y: None
                        font_name: "main_font.ttf"
                        height: self.texture_size[1]
                        padding_y: 15
                    MDTextFieldRound:
                        id: email_l
                        hint_text: "Логин"
                        icon_right: "account"
                        #size_hint_x: None
                        font_name: "main_font.ttf"
                        font_size : 25
                        pos_hint: {"center_x":.5}
                        color_active: [1,1,1,1]
                    MDTextFieldRound:
                        id: password_l
                        hint_text: "Пароль"
                        icon_right: "eye-off"
                        #size_hint_x: None
                        font_name: "main_font.ttf"
                        font_size : 25
                        pos_hint: {"center_x":.5}
                        color_active: [1,1,1,1]
                        password: True
                    MDRoundFlatButton:
                        text: 'Войти'
                        font_name: "main_font.ttf"
                        pos_hint: {"center_x":.5}
                        font_size: 20
                        on_press: root.login()

#                Label:
#                    text: "Введите логин:"
#                    color: 1,1,1,1
#                    font_name: "main_font.ttf"
#                    font_size: "16sp"
#                    size_hint: None, None
#                    #width: 100
#                    width: 300
#                    height: 50
#                    pos_hint: {"center_x":.5,"center_y":.8}
#                TextInput:
#                    id: email_l
#                    size_hint: None, None
#                    #width: 100
#                    width: 300
#                    height: 50
#                    font_name: "main_font.ttf"
#                    font_size: "40sp"
#                    pos_hint: {"center_x":.5}
#                    multiline: False
#                Label:
#                    text: "Введите пароль:"
#                    color: 1,1,1,1
#                    font_name: "main_font.ttf"
#                    font_size: "16sp"
#                    size_hint: None, None
#                    #width: 100
#                    width: 300
#                    height: 50
#                    pos_hint: {"center_x":.5}
#                TextInput:
#                    id: password_l
#                    size_hint: None, None
#                    #width: 100
#                    width: 300
#                    height: 50
#                    font_name: "main_font.ttf"
#                    font_size: "40sp"
#                    pos_hint: {"center_x":.5}
#                    multiline: False
#                MDFillRoundFlatButton:
#
#                    md_bg_color: 1, 1, 1, 1
#                    #size_hint: .3, .1
#
#                    pos_hint: {"center_x":.5}
#                    text: "Войти"
#                    text_color: .1, .6, .8, 1
#                    on_press: root.login()

<Settings_gui>:

    MDTabs:
        lock_swiping: True
        SettingsTab:
            text: "Аккаунт"
            Button:

                text: "<Сохранить"
                size_hint: .2,.1
                pos_hint_y: .9
                on_press: root.u()


            Label:
                id: f
                text: "Ваш аккаунт"
                color: 0,0,0,1
        SettingsTab:
            text: "Шрифт"
            Button:

                text: "<Сохранить"
                size_hint: .2,.1
                pos_hint_y: .9
                on_press: root.back()
            Label:
                text: "Размер шрифта"
                color: 0,0,0,1
            MDSlider:
                id: settings_font_slider
                min: 0

                max: 100
                step: 1
                on_touch_up: root.set_font()
                size_hint: .8,.3
                pos_hint: {"center_x":.5,"center_y":.1}
                orientation: 'horizontal'


<Clicker>:
    id: main_gui
    main_font_size: 29
    orientation: 'vertical'


    MDBottomNavigation:
        name: "tools"
        id: tools
        #color stuff
        #panel_color: 0,0,1,1

        MDBottomNavigationItem:
            name: 'main'
            text: "Майнинг"
            icon: 'bitcoin'
            id: hi


            Image:
                source: "background.jpg"
                allow_stretch: True
                keep_ratio: False

            MDToolbar:


                pos_hint: {"top": 1}

                size_hint_y: .07
                #left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]
                title:'Настройки'

                #size_hint_y: .07
                left_action_items:[['cog',lambda x: nav_drawer.set_state("open")]]
                right_action_items:[['information',lambda x: root.show_info()]]
                #elevation:10
                #md_bg_color: 0,0,100/255,1

            ButImage:


                size_hint: (.38,.38) if self.state == 'down' else (.4,.4)

                source: 'mining.png'

                pos_hint: {"center_x":.5,"center_y":.5}

                on_press: root.on_tap()

            MDLabel:
                #size_hint: None, None
                #size: 200, 200
                id: TON_num

                color: 1,1,1,1
                halign: "center"
                pos_hint: {"center_y":.85}
                #size_hint: 1,1
                font_size: "40sp"
                font_name: "main_font.ttf"

            #NavigationLayout:
            MDNavigationDrawer:
                id: nav_drawer
                orientation: "vertical"
                padding: "8dp"
                spacing: "8dp"
#                MDLabel:
#                    text: "Ваш аккаунт"
#                    #font_size: "40sp"
#                    font_style: "Button"
#                    size_hint_y: None
#                    height: self.texture_size[1]
#
#                AnchorLayout:
#                    anchor_x: "left"
#                    size_hint_y: None
#                    height: avatar.height
#
#                    AsyncImage:
#                        id: avatar
#                        size_hint: None, None
#                        #size: "56dp", "56dp"
#                        #source: ""
#
#                MDLabel:
#                    id: player_name
#                    text: "Аккаунт"
#                    font_style: "C"
#                    size_hint_y: None
#                    height: self.texture_size[1]
#
#                MDLabel:
#                    id: player_login
#                    text: "Логин"
#                    font_style: "Button"
#                    size_hint_y: None
#                    height: self.texture_size[1]
                MDBoxLayout:
                    orientation: 'vertical'
                    padding: "8dp"
                    spacing: "8dp"
                    AsyncImage:
                        id: avatar
                        size_hint: (1,1)
                        #source: "mine.jpg"
                    MDLabel:
                        id: player_name
                        text: "Attreya"
                        font_style: "Subtitle1"
                        size_hint_y: None
                        height: self.texture_size[1]
                    MDLabel:
                        id: player_login
                        text: "attreya01@gmail.com"
                        size_hint_y: None
                        font_style: "Caption"
                        height: self.texture_size[1]
                ScrollView:
                    MDList:
                        id: md_list
                        OneLineIconListItem:
                            text: "Выйти"
                            on_press: root.sign_out()
                            IconLeftWidget:
                                icon: "logout"




            MDSpinner:
                id: loading
                size_hint: None, None
                size: "46dp", "46dp"
                pos_hint: {'center_x': .5, 'center_y': .5}
                active: False
        MDBottomNavigationItem:
            id: store
            text: "Магазин"
            icon: 'store'
            name: 'store'
            MDTabs:
                lock_swiping: True
                SettingsTab:
                    text: "Майнинг"

                    ScrollView:
                        #size_hint: 1,1
                        #pos_hint: {"center_x": .5}
                        #Удвоение майнинга
                        MDList:
                            #size_hint: 1,1
                            #pos_hint: {"center_x": .5}
                            #orientation: "vertical"
                            TwoLineAvatarListItem:
                                id: text_summation
                                icon: "account-cog"
                                text: "Прокачка кнопки"
                                on_press: root.buy_confirm(name= "прокачка кнопки")
                                ImageLeftWidget:
                                    source: "1.png"

                            TwoLineAvatarListItem:
                                id: text_doubling
                                icon: "account-cog"
                                text: "Удвоение майнинга"

                                on_press: root.buy_confirm(name= "удвоение майнинга")

                                ImageLeftWidget:
                                    source: "2.png"

                SettingsTab:

                    text: "Кликер"

                    ScrollView:
                        #size_hint: 1,1
                        #pos_hint: {"center_x": .5}
                        #Удвоение майнинга
                        adaptive_height: True

                        MDList:

                            id: bot_shop
                            #size_hint: 1,1
                            #pos_hint: {"center_x": .5}
                            #orientation: "vertical"

                            ThreeLineAvatarListItem:
                                id: text_bot

                                icon: "account-cog"
                                text: "Автомайнер"
                                secondary_text: "Автоматически майнит"
                                tertiary_text: "Цена: 1 TON"
                                on_press: root.buy_confirm(name="автомайнер")
                                ImageLeftWidget:
                                    source: "bot.png"
                            ThreeLineAvatarListItem:


                                icon: "account-cog"
                                text: "Celeron Pro"
                                secondary_text: "Чистая скорость добычи: 0.000001 в секунду"
                                tertiary_text: "Цена: 0.10 TON"
                                on_press: root.buy_confirm(name="Celeron Pro")
                                ImageLeftWidget:
                                    source: "processor.png"
                            ThreeLineAvatarListItem:


                                icon: "account-cog"
                                text: "Gt 770"
                                secondary_text: "Чистая скорость добычи: 0.00002 в секунду"
                                tertiary_text: "Цена: 0.50 TON"
                                on_press: root.buy_confirm(name="Gt 770")
                                ImageLeftWidget:
                                    source: "video card.png"
                            ThreeLineAvatarListItem:


                                icon: "account-cog"
                                text: "Gt 870"
                                secondary_text: "Чистая скорость добычи: 0.00003"
                                tertiary_text: "Цена: 0.70 TON"
                                on_press: root.buy_confirm(name="Gt 870")
                                ImageLeftWidget:
                                    source: "video card.png"
                            ThreeLineAvatarListItem:


                                icon: "account-cog"
                                text: "Gtx 970"
                                secondary_text: "Чистая скорость добычи: 0.00004"
                                tertiary_text: "Цена: 0.90 TON"
                                on_press: root.buy_confirm(name="Gtx 970")
                                ImageLeftWidget:
                                    source: "video card.png"
                            ThreeLineAvatarListItem:


                                icon: "account-cog"
                                text: "Rtx 1050"
                                secondary_text: "Чистая скорость добычи: 0.00005"
                                tertiary_text: "Цена: 1 TON"
                                on_press: root.buy_confirm(name="Rtx 1050")
                                ImageLeftWidget:
                                    source: "video card.png"
                            ThreeLineAvatarListItem:


                                icon: "account-cog"
                                text: "Rtx 1070"
                                secondary_text: "Чистая скорость добычи: 0.00006"
                                tertiary_text: "Цена: 1.5 TON"
                                on_press: root.buy_confirm(name="Rtx 1070")
                                ImageLeftWidget:
                                    source: "video card.png"
                            ThreeLineAvatarListItem:


                                icon: "account-cog"
                                text: "Rtx 2060"
                                secondary_text: "Чистая скорость добычи: 0.00007"
                                tertiary_text: "Цена: 1.9 TON"
                                on_press: root.buy_confirm(name="Rtx 2060")
                                ImageLeftWidget:
                                    source: "video card.png"
                            ThreeLineAvatarListItem:


                                icon: "account-cog"
                                text: "Rtx 2070 Super"
                                secondary_text: "Чистая скорость добычи: 0.00008"
                                tertiary_text: "Цена: 2.1 TON"
                                on_press: root.buy_confirm(name="Rtx 2070 Super")
                                ImageLeftWidget:
                                    source: "video card.png"
                            ThreeLineAvatarListItem:


                                icon: "account-cog"
                                text: "Rtx 2080 TI"
                                secondary_text: "Чистая скорость добычи: 0.00009"
                                tertiary_text: "Цена: 2.6 TON"
                                on_press: root.buy_confirm(name="Rtx 2080 TI")
                                ImageLeftWidget:
                                    source: "video card.png"
                            ThreeLineAvatarListItem:


                                icon: "account-cog"
                                text: "Rtx 3060 Super"
                                secondary_text: "Чистая скорость добычи: 0.0015"
                                tertiary_text: "Цена: 3.0 TON"
                                on_press: root.buy_confirm(name="Rtx 3060 Super")
                                ImageLeftWidget:
                                    source: "video card.png"
                            ThreeLineAvatarListItem:


                                icon: "account-cog"
                                text: "Rtx 3090 Super TI"
                                secondary_text: "Чистая скорость добычи: 0.0095"
                                tertiary_text: "Цена: 3.8 TON"
                                on_press: root.buy_confirm(name="Rtx 3090 Super TI")
                                ImageLeftWidget:
                                    source: "video card.png"
                            ThreeLineAvatarListItem:


                                icon: "account-cog"
                                text: "Rtx 8000 Super TI Extreme Edition"
                                secondary_text: "Чистая скорость добычи: 1.2"
                                tertiary_text: "Цена: 4.5 TON"
                                on_press: root.buy_confirm(name="Rtx 8000 Super TI Extreme Edition")
                                ImageLeftWidget:
                                    source: "video card.png"

                        #size_hint: 1,1
                        #pos_hint: {"center_x": .5}
                        #Удвоение майнинга
                        #MDList:
                            #size_hint: 1,1
                            #pos_hint: {"center_x": .5}
                            #orientation: "vertical"



                SettingsTab:
                    title: "Скоро!!!"
                    FloatLayout:
                        MDLabel:
                            color: 0,0,0,1
                            font_name: "main_font.ttf"
                            font_size: root.main_font_size

                            #size_hint: None, None
                            #size: 200, 200
                            font_size: self.font_size
                            halign: "center"
                            text: "Скоро появятся новые акции!!! Ждите!!"
                            #text_size: self.width, None
        MDBottomNavigationItem:
            id: games
            text: "Игры"
            icon: 'google-controller'
            name: 'games'
            MDTabs:
                lock_swiping: True
                SettingsTab:

                    title: "Рулетка"



                    FloatLayout:
                        id: find_it1
                        Label:
                            id: value_bet_text
                            text: "Ваша ставка: ??? TON"
                            font_size: "25sp"
                            font_name: "main_font.ttf"
#                            size_hint: None, None
#                            size: 200, 200
                            color: 0,0,0,1
                            pos_hint: {"center_x":.5,"center_y":.8}
                            #text_size: self.width, None
                        Button:


                            size_hint: .2, .1
                            #size: 200, 100
                            pos_hint: {"center_x":.5,"center_y":.5}

                            text: "Крутить"
                            font_size: "20sp"
                            font_name: "main_font.ttf"
                            center_x: self.parent.center_x
                            center_y: self.parent.center_y


                            allow_stretch: True
                            keep_ratio: False
                            id: buy_doubling


                            on_press: root.find_it()


                        Label:
                            text: "Установите ставку в %:"
                            font_size: "25sp"
                            #font_name: "main_font.ttf"
                            #size_hint: None, None
                            #size: 200, 200
                            color: 0,0,0,1
                            pos_hint: {"center_x":.5,"center_y":.2}

                        MDSlider:
                            id: bet_value
                            min: 0

                            max: 100
                            step: 1
                            on_touch_up: root.show_value()
                            size_hint: .8,.3
                            pos_hint: {"center_x":.5,"center_y":.1}
                            orientation: 'horizontal'


                SettingsTab:
                    title: "Скоро!!!"
                    FloatLayout:
                        Label:
                            color: 0,0,0,1
                            #size_hint: None, None
                            #size: 200, 200
                            font_size: self.font_size
                            font_name: "main_font.ttf"
                            halign: "center"
                            text: "Скоро появятся новые миниигры!!! Ждите!!"
